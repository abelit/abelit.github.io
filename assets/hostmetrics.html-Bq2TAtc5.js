import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,f as t}from"./app-C7nDDXNs.js";const e={},p=t(`<h2 id="服务器-hostmetrics" tabindex="-1"><a class="header-anchor" href="#服务器-hostmetrics"><span>服务器 HostMetrics</span></a></h2><ul><li>配置文件<code>config.yaml</code></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment"># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span>
<span class="token comment"># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span>
<span class="token comment"># HostMetrics配置参考： https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/hostmetricsreceiver/README.md</span>

<span class="token key atrule">extensions</span><span class="token punctuation">:</span>
  <span class="token key atrule">health_check</span><span class="token punctuation">:</span>
  <span class="token key atrule">pprof</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">1777</span>
  <span class="token key atrule">zpages</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">55679</span>

<span class="token key atrule">receivers</span><span class="token punctuation">:</span>
  <span class="token key atrule">otlp</span><span class="token punctuation">:</span>
    <span class="token key atrule">protocols</span><span class="token punctuation">:</span>
      <span class="token key atrule">grpc</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">4317</span>
      <span class="token key atrule">http</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">4318</span>
  <span class="token key atrule">hostmetrics</span><span class="token punctuation">:</span>
    <span class="token key atrule">collection_interval</span><span class="token punctuation">:</span> 1m
    <span class="token key atrule">scrapers</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span>
      <span class="token key atrule">load</span><span class="token punctuation">:</span>
      <span class="token key atrule">memory</span><span class="token punctuation">:</span>
      <span class="token key atrule">disk</span><span class="token punctuation">:</span>
      <span class="token key atrule">filesystem</span><span class="token punctuation">:</span>
      <span class="token key atrule">network</span><span class="token punctuation">:</span>
      <span class="token key atrule">paging</span><span class="token punctuation">:</span>
      <span class="token key atrule">processes</span><span class="token punctuation">:</span>

  <span class="token key atrule">opencensus</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">55678</span>

  <span class="token comment"># Collect own metrics</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">scrape_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;otel-collector&#39;</span>
        <span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 10s
        <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;0.0.0.0:8888&#39;</span><span class="token punctuation">]</span>

  <span class="token key atrule">jaeger</span><span class="token punctuation">:</span>
    <span class="token key atrule">protocols</span><span class="token punctuation">:</span>
      <span class="token key atrule">grpc</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">14250</span>
      <span class="token key atrule">thrift_binary</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">6832</span>
      <span class="token key atrule">thrift_compact</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">6831</span>
      <span class="token key atrule">thrift_http</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">14268</span>

  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">9411</span>

<span class="token key atrule">processors</span><span class="token punctuation">:</span>
  <span class="token key atrule">batch</span><span class="token punctuation">:</span>

<span class="token key atrule">exporters</span><span class="token punctuation">:</span>
  <span class="token key atrule">debug</span><span class="token punctuation">:</span>
    <span class="token key atrule">verbosity</span><span class="token punctuation">:</span> detailed
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> <span class="token string">&quot;0.0.0.0:8889&quot;</span>

<span class="token key atrule">service</span><span class="token punctuation">:</span>

  <span class="token key atrule">pipelines</span><span class="token punctuation">:</span>

    <span class="token key atrule">traces</span><span class="token punctuation">:</span>
      <span class="token key atrule">receivers</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>otlp<span class="token punctuation">,</span> opencensus<span class="token punctuation">,</span> jaeger<span class="token punctuation">,</span> zipkin<span class="token punctuation">]</span>
      <span class="token key atrule">processors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>batch<span class="token punctuation">]</span>
      <span class="token key atrule">exporters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>debug<span class="token punctuation">]</span>

    <span class="token key atrule">metrics</span><span class="token punctuation">:</span>
      <span class="token key atrule">receivers</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>otlp<span class="token punctuation">,</span> opencensus<span class="token punctuation">,</span> prometheus<span class="token punctuation">,</span> hostmetrics<span class="token punctuation">]</span>
      <span class="token key atrule">processors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>batch<span class="token punctuation">]</span>
      <span class="token key atrule">exporters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>debug<span class="token punctuation">,</span> prometheus<span class="token punctuation">]</span>

    <span class="token key atrule">logs</span><span class="token punctuation">:</span>
      <span class="token key atrule">receivers</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>otlp<span class="token punctuation">]</span>
      <span class="token key atrule">processors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>batch<span class="token punctuation">]</span>
      <span class="token key atrule">exporters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>debug<span class="token punctuation">]</span>

  <span class="token key atrule">extensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>health_check<span class="token punctuation">,</span> pprof<span class="token punctuation">,</span> zpages<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),c=[p];function o(l,u){return s(),a("div",null,c)}const r=n(e,[["render",o],["__file","hostmetrics.html.vue"]]),d=JSON.parse(`{"path":"/guide/devops/opentelemetry/configuration/hostmetrics.html","title":"HostMetrics","lang":"zh-CN","frontmatter":{"title":"HostMetrics","description":"服务器 HostMetrics 配置文件config.yaml","head":[["meta",{"property":"og:url","content":"https://github.com/abelit/abelit-datapeacock.git/guide/devops/opentelemetry/configuration/hostmetrics.html"}],["meta",{"property":"og:site_name","content":"数之雀"}],["meta",{"property":"og:title","content":"HostMetrics"}],["meta",{"property":"og:description","content":"服务器 HostMetrics 配置文件config.yaml"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-03T08:57:34.000Z"}],["meta",{"property":"article:author","content":"Abelit"}],["meta",{"property":"article:modified_time","content":"2024-08-03T08:57:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HostMetrics\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-03T08:57:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abelit\\",\\"url\\":\\"https://github.com/abelit\\"}]}"]]},"headers":[{"level":2,"title":"服务器 HostMetrics","slug":"服务器-hostmetrics","link":"#服务器-hostmetrics","children":[]}],"git":{"createdTime":1722675454000,"updatedTime":1722675454000,"contributors":[{"name":"abelit","email":"ychenid@live.com","commits":1}]},"readingTime":{"minutes":0.58,"words":174},"filePathRelative":"guide/devops/opentelemetry/configuration/hostmetrics.md","localizedDate":"2024年8月3日","autoDesc":true,"excerpt":"<h2>服务器 HostMetrics</h2>\\n<ul>\\n<li>配置文件<code>config.yaml</code></li>\\n</ul>\\n<div class=\\"language-yaml\\" data-ext=\\"yml\\" data-title=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token comment\\"># To limit exposure to denial of service attacks, change the host in endpoints below from 0.0.0.0 to a specific network interface.</span>\\n<span class=\\"token comment\\"># See https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/security-best-practices.md#safeguards-against-denial-of-service-attacks</span>\\n<span class=\\"token comment\\"># HostMetrics配置参考： https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/hostmetricsreceiver/README.md</span>\\n\\n<span class=\\"token key atrule\\">extensions</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">health_check</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">pprof</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">1777</span>\\n  <span class=\\"token key atrule\\">zpages</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">55679</span>\\n\\n<span class=\\"token key atrule\\">receivers</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">otlp</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">protocols</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">grpc</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">4317</span>\\n      <span class=\\"token key atrule\\">http</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">4318</span>\\n  <span class=\\"token key atrule\\">hostmetrics</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">collection_interval</span><span class=\\"token punctuation\\">:</span> 1m\\n    <span class=\\"token key atrule\\">scrapers</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">cpu</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">load</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">memory</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">disk</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">filesystem</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">network</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">paging</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">processes</span><span class=\\"token punctuation\\">:</span>\\n\\n  <span class=\\"token key atrule\\">opencensus</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">55678</span>\\n\\n  <span class=\\"token comment\\"># Collect own metrics</span>\\n  <span class=\\"token key atrule\\">prometheus</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">config</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">scrape_configs</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">job_name</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'otel-collector'</span>\\n        <span class=\\"token key atrule\\">scrape_interval</span><span class=\\"token punctuation\\">:</span> 10s\\n        <span class=\\"token key atrule\\">static_configs</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">targets</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'0.0.0.0:8888'</span><span class=\\"token punctuation\\">]</span>\\n\\n  <span class=\\"token key atrule\\">jaeger</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">protocols</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">grpc</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">14250</span>\\n      <span class=\\"token key atrule\\">thrift_binary</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">6832</span>\\n      <span class=\\"token key atrule\\">thrift_compact</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">6831</span>\\n      <span class=\\"token key atrule\\">thrift_http</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">14268</span>\\n\\n  <span class=\\"token key atrule\\">zipkin</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> 0.0.0.0<span class=\\"token punctuation\\">:</span><span class=\\"token number\\">9411</span>\\n\\n<span class=\\"token key atrule\\">processors</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">batch</span><span class=\\"token punctuation\\">:</span>\\n\\n<span class=\\"token key atrule\\">exporters</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">debug</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">verbosity</span><span class=\\"token punctuation\\">:</span> detailed\\n  <span class=\\"token key atrule\\">prometheus</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">endpoint</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"0.0.0.0:8889\\"</span>\\n\\n<span class=\\"token key atrule\\">service</span><span class=\\"token punctuation\\">:</span>\\n\\n  <span class=\\"token key atrule\\">pipelines</span><span class=\\"token punctuation\\">:</span>\\n\\n    <span class=\\"token key atrule\\">traces</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">receivers</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>otlp<span class=\\"token punctuation\\">,</span> opencensus<span class=\\"token punctuation\\">,</span> jaeger<span class=\\"token punctuation\\">,</span> zipkin<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">processors</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>batch<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">exporters</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>debug<span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token key atrule\\">metrics</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">receivers</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>otlp<span class=\\"token punctuation\\">,</span> opencensus<span class=\\"token punctuation\\">,</span> prometheus<span class=\\"token punctuation\\">,</span> hostmetrics<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">processors</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>batch<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">exporters</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>debug<span class=\\"token punctuation\\">,</span> prometheus<span class=\\"token punctuation\\">]</span>\\n\\n    <span class=\\"token key atrule\\">logs</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">receivers</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>otlp<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">processors</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>batch<span class=\\"token punctuation\\">]</span>\\n      <span class=\\"token key atrule\\">exporters</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>debug<span class=\\"token punctuation\\">]</span>\\n\\n  <span class=\\"token key atrule\\">extensions</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>health_check<span class=\\"token punctuation\\">,</span> pprof<span class=\\"token punctuation\\">,</span> zpages<span class=\\"token punctuation\\">]</span>\\n</code></pre></div>"}`);export{r as comp,d as data};
